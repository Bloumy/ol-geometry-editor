!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("turf-polygon");b.exports=function(a){var b=[a[0],a[1]],c=[a[0],a[3]],e=[a[2],a[3]],f=[a[2],a[1]],g=d([[b,f,e,c,b]]);return g}},{"turf-polygon":4}],2:[function(a,b,c){var d=a("turf-meta").coordEach;b.exports=function(a){var b=[1/0,1/0,-(1/0),-(1/0)];return d(a,function(a){b[0]>a[0]&&(b[0]=a[0]),b[1]>a[1]&&(b[1]=a[1]),b[2]<a[0]&&(b[2]=a[0]),b[3]<a[1]&&(b[3]=a[1])}),b}},{"turf-meta":3}],3:[function(a,b,c){function d(a,b,c){var d,e,f,g,h,i,j,k,m,n=0,o="FeatureCollection"===a.type,p="Feature"===a.type,q=o?a.features.length:1;for(d=0;d<q;d++)for(k=o?a.features[d].geometry:p?a.geometry:a,m="GeometryCollection"===k.type,i=m?k.geometries.length:1,g=0;g<i;g++)if(h=m?k.geometries[g]:k,j=h.coordinates,n=!c||"Polygon"!==h.type&&"MultiPolygon"!==h.type?0:1,"Point"===h.type)b(j);else if("LineString"===h.type||"MultiPoint"===h.type)for(e=0;e<j.length;e++)b(j[e]);else if("Polygon"===h.type||"MultiLineString"===h.type)for(e=0;e<j.length;e++)for(f=0;f<j[e].length-n;f++)b(j[e][f]);else{if("MultiPolygon"!==h.type)throw new Error("Unknown Geometry Type");for(e=0;e<j.length;e++)for(f=0;f<j[e].length;f++)for(l=0;l<j[e][f].length-n;l++)b(j[e][f][l])}}function e(a,b,c,e){return d(a,function(a){c=b(c,a)},e),c}function f(a,b){var c;switch(a.type){case"FeatureCollection":for(features=a.features,c=0;c<a.features.length;c++)b(a.features[c].properties);break;case"Feature":b(a.properties)}}function g(a,b,c){return f(a,function(a){c=b(c,a)}),c}b.exports.coordEach=d,b.exports.coordReduce=e,b.exports.propEach=f,b.exports.propReduce=g},{}],4:[function(a,b,c){b.exports=function(a,b){if(null===a)throw new Error("No coordinates passed");for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<d[d.length-1].length;e++){if(d.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(d[d.length-1][e]!==d[0][e])throw new Error("First and last Position are not equivalent.")}var f={type:"Feature",geometry:{type:"Polygon",coordinates:a},properties:b};return f.properties||(f.properties={}),f}},{}],5:[function(a,b,c){var d=a("turf-bbox-polygon"),e=a("turf-extent"),f=a("./defaultParams.js"),g=a("./util/geometryToSimpleGeometries"),h=a("./Viewer"),i=function(a,b){this.dataElement=a,this.settings={},$.extend(!0,this.settings,f,b),this.viewer=new h({techno:this.settings.techno,geometryType:this.settings.geometryType});var c=this.initMap();this.getMap=function(){return c},this.initDrawLayer(),this.settings.editable&&this.initDrawControls(),this.settings.hide&&this.dataElement.hide()};i.prototype.initMap=function(){return this.viewer.initMap({width:this.settings.width,height:this.settings.height,dataElement:this.dataElement,layers:this.settings.tileLayers,lon:this.settings.lon,lat:this.settings.lat,zoom:this.settings.zoom,maxZoom:this.settings.maxZoom,minZoom:this.settings.minZoom})},i.prototype.isDataElementAnInput=function(){return"undefined"!=typeof this.dataElement.val},i.prototype.getRawData=function(){return this.isDataElementAnInput()?$.trim(this.dataElement.val()):$.trim(this.dataElement.html())},i.prototype.setRawData=function(a){var b=this.getRawData();b!==a&&(this.isDataElementAnInput()?this.dataElement.val(a):this.dataElement.html(a))},i.prototype.setGeometry=function(a){a instanceof Array&&4===a.length&&(a=d(a).geometry),this.viewer.removeFeatures(this.featuresCollection);var b=g(a);this.viewer.setGeometries(this.featuresCollection,b),this.settings.centerOnResults&&b.length>0&&this.viewer.fitViewToFeaturesCollection(this.featuresCollection),this.serializeGeometry()},i.prototype.initDrawLayer=function(){this.featuresCollection=this.viewer.createFeaturesCollection(),this.updateDrawLayer(),this.dataElement.on("change",this.updateDrawLayer.bind(this))},i.prototype.updateDrawLayer=function(){var a,b=this.getRawData();if(""!==b)try{a=JSON.parse(b),this.setGeometry(a)}catch(c){return void this.viewer.removeFeatures(this.featuresCollection)}else this.viewer.removeFeatures(this.featuresCollection)},i.prototype.getGeometryType=function(){return this.settings.geometryType},i.prototype.initDrawControls=function(){var a={geometryType:this.getGeometryType(),features:this.featuresCollection};this.viewer.addDrawControl(a);var b={onDrawCreated:function(a){this.viewer.drawCreatedHandler(this.featuresCollection,a),this.settings.centerOnResults&&this.viewer.getFeaturesCount(this.featuresCollection)>0&&this.viewer.fitViewToFeaturesCollection(this.featuresCollection),this.serializeGeometry()}.bind(this),onDrawModified:function(a){this.settings.centerOnResults&&this.viewer.getFeaturesCount(this.featuresCollection)>0&&this.viewer.fitViewToFeaturesCollection(this.featuresCollection),this.serializeGeometry()}.bind(this),onDrawDeleted:function(a){this.serializeGeometry()}.bind(this)};this.viewer.addDrawEvents(b)},i.prototype.serializeGeometry=function(){var a=this.viewer.getGeometryByFeaturesCollection(this.featuresCollection),b="";a&&(b="Rectangle"===this.getGeometryType()?JSON.stringify(e(a)):JSON.stringify(a)),this.settings.onResult(b),this.setRawData(b)},b.exports=i},{"./Viewer":6,"./defaultParams.js":8,"./util/geometryToSimpleGeometries":13,"turf-bbox-polygon":1,"turf-extent":2}],6:[function(a,b,c){(function(c){var d="undefined"!=typeof window?window.ol:"undefined"!=typeof c?c.ol:null,e=a("./controls/DrawControl"),f=a("./util/guid"),g=a("./util/featureCollectionToGeometry.js"),h=a("./util/isSingleGeometryType.js"),i=function(a){this.settings={dataProjection:"EPSG:4326",mapProjection:"EPSG:3857"},$.extend(this.settings,a),this.initMap(this.settings)};i.prototype.initMap=function(a){var b="map-"+f(),c=$('<div id="'+b+'"></div>');c.addClass("map"),c.css("width",a.width),c.css("height",a.height),c.insertAfter(a.dataElement),this.map=this.createMap(b,a),this.addLayersToMap(a.layers)},i.prototype.getMap=function(a){return this.map},i.prototype.addControl=function(a){this.getMap().addControl(a)},i.prototype.createMap=function(a,b){return b=b||{},new d.Map({target:a,view:new d.View({center:d.proj.transform([b.lon,b.lat],this.settings.dataProjection,this.settings.mapProjection),zoom:b.zoom,minZoom:b.minZoom,maxZoom:b.maxZoom,projection:this.settings.mapProjection}),controls:[new d.control.Zoom,new d.control.Attribution]})},i.prototype.addLayersToMap=function(a,b){b=b||{};for(var c in a)this.getMap().addLayer(new d.layer.Tile({source:new d.source.XYZ({attributions:[a[c].attribution],url:a[c].url,crossOrigin:"Anonymous"})}))},i.prototype.setGeometries=function(a,b){for(var c in b){var e;switch(b[c].type){case"Point":e=new d.geom.Point(b[c].coordinates);break;case"LineString":e=new d.geom.LineString(b[c].coordinates);break;case"Polygon":e=new d.geom.Polygon(b[c].coordinates)}var f=new d.Feature({geometry:e.transform(this.settings.dataProjection,this.settings.mapProjection)});f.set("type",this.settings.geometryType),a.push(f)}},i.prototype.fitViewToFeaturesCollection=function(a){var b=[];a.forEach(function(a){b.push(a.getGeometry())}),this.getMap().getView().fit(new d.geom.GeometryCollection(b).getExtent(),{size:this.getMap().getSize(),duration:100})},i.prototype.createFeaturesCollection=function(){return new d.Collection},i.prototype.removeFeatures=function(a){a.clear()},i.prototype.drawCreatedHandler=function(a,b){h(this.getGeometryType())&&(this.removeFeatures(a),a.push(b.feature))},i.prototype.getGeometryType=function(){return this.settings.geometryType},i.prototype.addDrawControl=function(a){var b={features:a.features,type:a.geometryType},c=new e(b);this.addControl(c)},i.prototype.addDrawEvents=function(a){this.getMap().on("draw:created",a.onDrawCreated),this.getMap().on("draw:edited",a.onDrawModified),this.getMap().on("draw:deleted",a.onDrawDeleted)},i.prototype.getGeometryByFeaturesCollection=function(a){var b=(new d.format.GeoJSON).writeFeatures(a.getArray(),{featureProjection:this.settings.mapProjection,dataProjection:this.settings.dataProjection});return g(JSON.parse(b))},i.prototype.getFeaturesCount=function(a){return a.getLength()},b.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./controls/DrawControl":7,"./util/featureCollectionToGeometry.js":11,"./util/guid":14,"./util/isSingleGeometryType.js":15}],7:[function(a,b,c){(function(c){var d="undefined"!=typeof window?window.ol:"undefined"!=typeof c?c.ol:null,e=a("../interactions/DeleteInteraction"),f=a("../interactions/ModifyBoxInteraction"),g=function(a){var b={layer:null,features:null,type:"",title:""};this.settings=$.extend(b,a),this.active=!1,this.drawBar=$("<div>").addClass("ol-draw ol-unselectable ol-control"),d.control.Control.call(this,{element:this.drawBar.get(0),target:a.target})};d.inherits(g,d.control.Control),g.prototype.setMap=function(a){d.control.Control.prototype.setMap.call(this,a),this.initControl()},g.prototype.initControl=function(){this.createDrawLayer(),this.addDrawInteraction(),this.addModifyInteraction(),this.addDeleteInteraction(),this.configureInteractionSwitching()},g.prototype.createDrawLayer=function(){this.settings.features.forEach(function(a){a.setStyle(this.getFeatureStyleByGeometryType(a.getGeometry().getType()))},this),this.layer=new d.layer.Vector({source:new d.source.Vector({features:this.settings.features})}),this.getMap().addLayer(this.layer)},g.prototype.getDrawLayer=function(){return this.layer},g.prototype.addDrawInteraction=function(){var a=new d.Collection,b={type:this.settings.type,style:this.getFeatureStyleByGeometryType(this.settings.type),features:a};"Square"===this.settings.type&&(b.type="Circle",b.geometryFunction=d.interaction.Draw.createRegularPolygon(4)),"Rectangle"===this.settings.type&&(b.type="Circle",b.geometryFunction=d.interaction.Draw.createBox()),this.drawInteraction=new d.interaction.Draw(b),this.drawInteraction.on("drawend",function(a){a.feature.set("type",this.settings.type),a.feature.setStyle(this.getFeatureStyleByGeometryType(this.settings.type)),this.settings.features.push(a.feature),this.getMap().dispatchEvent($.extend(a,{type:"draw:created",layer:this.getDrawLayer()}))}.bind(this)),this.getMap().addInteraction(this.drawInteraction),this.setDrawInteractionActive=function(a){this.drawInteraction.setActive(a),a?(c.addClass("active"),this.dispatchEvent("draw:active")):(c.removeClass("active"),this.dispatchEvent("draw:inactive"))}.bind(this);var c=$("<button>").attr("title","Draw a "+this.settings.type.toLowerCase()).addClass("ol-draw-"+this.settings.type.toLowerCase()).on("touchstart click",function(a){a&&a.preventDefault&&a.preventDefault(),this.setDrawInteractionActive(!this.drawInteraction.getActive())}.bind(this)).appendTo(this.drawBar);this.setDrawInteractionActive(!1)},g.prototype.getDrawInteraction=function(){return this.drawInteraction},g.prototype.prepareFeatureGroup=function(){this.featuresBasic=new d.Collection,this.featuresBox=new d.Collection,this.featuresSquare=new d.Collection;var a=function(a){switch(a.get("type")){case"Rectangle":this.featuresBox.push(a);break;case"Square":this.featuresSquare.push(a);break;default:this.featuresBasic.push(a)}}.bind(this),b=function(a){switch(a.get("type")){case"Rectangle":this.featuresBox.remove(a);break;case"Square":this.featuresSquare.remove(a);break;default:this.featuresBasic.remove(a)}}.bind(this);this.settings.features.forEach(a.bind(this)),this.settings.features.on("add",function(b){a(b.element)}),this.settings.features.on("remove",function(a){b(a.element)})},g.prototype.addModifyInteraction=function(){this.prepareFeatureGroup(),this.modifyInteractionBox=new f({features:this.featuresBox,type:this.settings.type}),this.modifyInteractionSquare=new d.interaction.Modify({features:this.featuresSquare,insertVertexCondition:function(){return!1}}),this.modifyInteractionBasic=new d.interaction.Modify({features:this.featuresBasic}),this.translateInteractionSquare=new d.interaction.Translate({features:this.featuresSquare,hitTolerance:10}),this.translateInteractionBasic=new d.interaction.Translate({features:this.featuresBasic,hitTolerance:10}),this.modifyInteractions=[this.modifyInteractionBasic,this.modifyInteractionBox,this.modifyInteractionSquare];var a=function(a){this.getMap().dispatchEvent($.extend(a,{type:"draw:edited"}))}.bind(this);for(var b in this.modifyInteractions)this.modifyInteractions[b].on("modifyend",a),this.getMap().addInteraction(this.modifyInteractions[b]);this.getMap().addInteraction(this.translateInteractionSquare),this.getMap().addInteraction(this.translateInteractionBasic),this.setModifyInteractionsActive=function(a){for(var b in this.modifyInteractions)this.modifyInteractions[b].setActive(a);this.translateInteractionBasic.setActive(a),this.translateInteractionSquare.setActive(a),a?(c.addClass("active"),this.dispatchEvent("edit:active")):(c.removeClass("active"),this.dispatchEvent("edit:inactive")),this.modifyInteractionsActive=a}.bind(this);var c=$("<button>").attr("title","Modify a "+this.settings.type.toLowerCase()).addClass("ol-edit").on("touchstart click",function(a){a&&a.preventDefault&&a.preventDefault(),this.setModifyInteractionsActive(!this.modifyInteractionsActive)}.bind(this)).appendTo(this.drawBar);this.setModifyInteractionsActive(!1)},g.prototype.getModifyInteraction=function(){return this.modifyInteraction},g.prototype.addDeleteInteraction=function(){this.deleteInteraction=new e({features:this.settings.features}),this.deleteInteraction.on("deleteend",function(a){this.getMap().dispatchEvent($.extend(a,{type:"draw:deleted"}))}.bind(this)),this.getMap().addInteraction(this.deleteInteraction),this.setDeleteInteractionActive=function(b){this.deleteInteraction.setActive(b),b?(a.addClass("active"),this.dispatchEvent("remove:active")):(a.removeClass("active"),this.dispatchEvent("remove:inactive"))}.bind(this);var a=$("<button>").attr("title","Delete a feature").addClass("ol-delete").on("touchstart click",function(a){a&&a.preventDefault&&a.preventDefault(),this.setDeleteInteractionActive(!this.deleteInteraction.getActive())}.bind(this)).appendTo(this.drawBar);this.setDeleteInteractionActive(!1)},g.prototype.getDeleteInteraction=function(){return this.deleteInteraction},g.prototype.configureInteractionSwitching=function(){this.on("draw:active",function(){this.setModifyInteractionsActive(!1),this.setDeleteInteractionActive(!1)}.bind(this)),this.on("edit:active",function(){this.setDrawInteractionActive(!1),this.setDeleteInteractionActive(!1)}.bind(this)),this.on("remove:active",function(){this.setDrawInteractionActive(!1),this.setModifyInteractionsActive(!1)}.bind(this))},g.prototype.getFeatureStyleByGeometryType=function(a){switch(a){case"Point":var b=new d.style.Style({image:new d.style.Icon({anchor:[.5,41],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:1,src:"../dist/images/marker-icon.png"})}),c=new d.style.Style({image:new d.style.Icon({anchor:[14,41],anchorXUnits:"pixels",anchorYUnits:"pixels",opacity:1,src:"../dist/images/marker-shadow.png"})});return[c,b]}},b.exports=g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../interactions/DeleteInteraction":9,"../interactions/ModifyBoxInteraction":10}],8:[function(a,b,c){var d={tileLayers:[{url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}],hide:!0,editable:!0,width:"100%",height:"500",lon:2,lat:45,zoom:4,maxZoom:18,geometryType:"Geometry",centerOnResults:!0,onResult:function(){}};b.exports=d},{}],9:[function(a,b,c){(function(a){var c="undefined"!=typeof window?window.ol:"undefined"!=typeof a?a.ol:null,d=function(a){a=$.extend({features:null},a),c.interaction.Pointer.call(this,{handleDownEvent:d.prototype.handleDownEvent,handleDragEvent:d.prototype.handleDragEvent,handleMoveEvent:d.prototype.handleMoveEvent,handleUpEvent:d.prototype.handleUpEvent}),this.features=a.features,this.pointerCursor_="pointer",this.feature_=null,this.previousCursor_=void 0};c.inherits(d,c.interaction.Pointer),d.prototype.handleDownEvent=function(a){var b=a.map,c=b.forEachFeatureAtPixel(a.pixel,function(a){for(var b in this.features.getArray())if(this.features.getArray()[b]===a)return a}.bind(this));return this.feature_=c,!!c},d.prototype.handleDragEvent=function(a){var b=a.map,c=b.forEachFeatureAtPixel(a.pixel,function(a){for(var b in this.features.getArray())if(this.features.getArray()[b]===a)return a}.bind(this)),d=a.map.getTargetElement();c?d.style.cursor!=this.pointerCursor_&&(this.previousCursor_=d.style.cursor,d.style.cursor=this.pointerCursor_):void 0!==this.previousCursor_&&(d.style.cursor=this.previousCursor_,this.previousCursor_=void 0)},d.prototype.handleMoveEvent=function(a){var b=a.map,c=b.forEachFeatureAtPixel(a.pixel,function(a){for(var b in this.features.getArray())if(this.features.getArray()[b]===a)return a}.bind(this)),d=a.map.getTargetElement();c?d.style.cursor!=this.pointerCursor_&&(this.previousCursor_=d.style.cursor,d.style.cursor=this.pointerCursor_):void 0!==this.previousCursor_&&(d.style.cursor=this.previousCursor_,this.previousCursor_=void 0)},d.prototype.handleUpEvent=function(a){var b=a.map,c=(b.forEachFeatureAtPixel(a.pixel,function(a){for(var b in this.features.getArray())this.features.getArray()[b]===a&&this.feature_===a&&this.features.remove(a)}.bind(this)),b.forEachFeatureAtPixel(a.pixel,function(a){for(var b in this.features.getArray())if(this.features.getArray()[b]===a)return a}.bind(this))),d=a.map.getTargetElement();return c?d.style.cursor=this.pointerCursor_:void 0!==d.style.cursor&&(d.style.cursor=void 0),this.dispatchEvent({type:"deleteend"}),!1},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(a,b,c){(function(a){var c="undefined"!=typeof window?window.ol:"undefined"!=typeof a?a.ol:null,d=function(a){a=$.extend({features:null,type:"Rectangle"},a),c.interaction.Pointer.call(this,{handleDownEvent:d.prototype.handleDownEvent,handleDragEvent:d.prototype.handleDragEvent,handleMoveEvent:d.prototype.handleMoveEvent,handleUpEvent:d.prototype.handleUpEvent}),this.features=a.features,this.type=a.type,this.coordinate_=null,this.grabCursor_="grab",this.grabbingCursor_="grabbing",this.feature_=null,this.previousCursor_=void 0,this.overlay_=new c.layer.Vector({source:new c.source.Vector({useSpatialIndex:!1,wrapX:!!a.wrapX}),style:a.style,updateWhileAnimating:!0,updateWhileInteracting:!0}),this.overlayPoints_=[]};c.inherits(d,c.interaction.Pointer),d.prototype.handleDownEvent=function(a){this.deltaX=0,this.deltaY=0;var b=this.getFeatureUnderMouse_(a);if(b){this.coordinate_=a.coordinate,this.feature_=b;var c=a.map.getTargetElement();c.style.cursor!==this.grabbingCursor_&&(c.style.cursor=this.grabbingCursor_)}return!!b},d.prototype.handleDragEvent=function(a){var b=this.getFeature_(a);this.deltaX=a.coordinate[0]-this.coordinate_[0],this.deltaY=a.coordinate[1]-this.coordinate_[1],b.getGeometry().translate(this.deltaX,this.deltaY);var c=a.map.getTargetElement();c.style.cursor=this.grabbingCursor_,this.handleModify_(a),this.coordinate_[0]=a.coordinate[0],this.coordinate_[1]=a.coordinate[1]},d.prototype.handleMoveEvent=function(a){var b=this.getFeatureUnderMouse_(a),c=a.map.getTargetElement();b?c.style.cursor!==this.grabCursor_&&(this.previousCursor_=c.style.cursor,c.style.cursor=this.grabCursor_):void 0!==this.previousCursor_&&(c.style.cursor=this.previousCursor_,this.previousCursor_=void 0)},d.prototype.handleUpEvent=function(a){this.deltaX=0,this.deltaY=0;var b=a.map.getTargetElement();return this.feature_?b.style.cursor=this.grabCursor_:b.style.cursor=void 0,this.dispatchEvent({type:"modifyend",feature:this.feature_}),this.coordinate_=null,this.feature_=null,!1},d.prototype.handleModify_=function(a){var b=this.getFeatureOfModifyPoint_(this.feature_);b?this.setFeatureByModifyPoints_(b):this.moveModifyPointsWithFeature_()},d.prototype.setActive=function(a){c.interaction.Pointer.prototype.setActive.call(this,a),a?this.enableModificationPoints(this.features):this.disableModificationPoints(this.features)},d.prototype.enableModificationPoints=function(a){this.getMap().addLayer(this.overlay_),this.overlayPoints_=[],a.forEach(function(a){this.addModificationPoints_(a)}.bind(this))},d.prototype.disableModificationPoints=function(a){this.removeModificationPoints_(a)},d.prototype.removeModificationPoints_=function(a){for(var b in this.overlayPoints_)for(var c in this.overlayPoints_[b].modificationPoints)a.remove(this.overlayPoints_[b].modificationPoints[c]);this.overlay_.getSource().clear(),this.getMap().removeLayer(this.overlay_),this.overlayPoints_=[]},d.prototype.addModificationPoints_=function(a){var b=a.getGeometry().getCoordinates()[0],d=[];for(var e in b)if("4"!==e){var f=new c.Feature({geometry:new c.geom.Point(b[e])});this.overlay_.getSource().addFeature(f),d[e]=f,this.features.push(f)}else d[e]=d[0];this.overlayPoints_.push({feature:a,modificationPoints:d})},d.prototype.getFeatureUnderMouse_=function(a){return a.map.forEachFeatureAtPixel(a.pixel,function(a){for(var b in this.features.getArray())if(this.features.getArray()[b]===a)return a}.bind(this))},d.prototype.getFeature_=function(a){return this.feature_},d.prototype.setFeatureByModifyPoints_=function(a){var b=this.getModifyPointsOfFeature_(a);this.updateLinkedModifyPointForBBox(this.feature_,b),this.redrawFeatureByModificationPointsPosition(a,b)},d.prototype.updateLinkedModifyPointForBBox=function(a,b){var c;for(var d in b)if(a===b[d]){c=parseInt(d);break}var e=c-1,f=c+1;0===c&&(e=3),3===c&&(f=0),c%2!==0?(b[e].getGeometry().translate(0,this.deltaY),b[f].getGeometry().translate(this.deltaX,0)):(b[e].getGeometry().translate(this.deltaX,0),b[f].getGeometry().translate(0,this.deltaY)),b[4].getGeometry().setCoordinates(b[0].getGeometry().getCoordinates())},d.prototype.redrawFeatureByModificationPointsPosition=function(a,b){var c=[];for(var d in b)c.push(b[d].getGeometry().getCoordinates());a.getGeometry().setCoordinates([c])},d.prototype.moveModifyPointsWithFeature_=function(){var a,b=this.getModifyPointsOfFeature_(this.feature_);switch(this.feature_.getGeometry().getType()){case"Polygon":a=this.feature_.getGeometry().getCoordinates()[0],a.pop()}for(var c in a)b[c].getGeometry().setCoordinates(a[c])},d.prototype.getFeatureOfModifyPoint_=function(a){for(var b in this.overlayPoints_)for(var c in this.overlayPoints_[b].modificationPoints)if(this.overlayPoints_[b].modificationPoints[c]===a)return this.overlayPoints_[b].feature},d.prototype.getModifyPointsOfFeature_=function(a){for(var b in this.overlayPoints_)if(this.overlayPoints_[b].feature===a)return this.overlayPoints_[b].modificationPoints},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(a,b,c){var d=a("./geometriesToCollection.js"),e=function(a){var b=[];return a.features.forEach(function(a){b.push(a.geometry)}),0===b.length?null:1==b.length?b[0]:d(b)};b.exports=e},{"./geometriesToCollection.js":12}],12:[function(a,b,c){var d=function(a){var b={};a.forEach(function(a){"undefined"==typeof b[a.type]?b[a.type]=1:b[a.type]++});var c=Object.keys(b);if(c.length>1)return{type:"GeometryCollection",geometries:a};var d="Multi"+Object.keys(b)[0],e=[];return a.forEach(function(a){e.push(a.coordinates)}),{type:d,coordinates:e}};b.exports=d},{}],13:[function(a,b,c){var d=function(a){var b=[],c=a.type.substring("Multi".length);return a.coordinates.forEach(function(a){b.push({type:c,coordinates:a})}),b},e=function(a){var b=[];return a.geometries.forEach(function(a){b.push(a)}),b},f=function(a){switch(a.type){case"Point":case"LineString":case"Polygon":return[a];case"MultiPoint":case"MultiLineString":case"MultiPolygon":return d(a);case"GeometryCollection":return e(a);default:throw"unsupported geometry type : "+a.type}};b.exports=f},{}],14:[function(a,b,c){var d=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};b.exports=d},{}],15:[function(a,b,c){var d=function(a){return["Point","LineString","Polygon","Rectangle"].indexOf(a)!==-1};b.exports=d},{}],16:[function(a,b,c){(function(b){var c="undefined"!=typeof window?window.jQuery:"undefined"!=typeof b?b.jQuery:null,d={defaultParams:a("./ge/defaultParams"),GeometryEditor:a("./ge/GeometryEditor")};c.fn.geometryEditor=function(a){return this.each(function(){var b=$(this),c=new d.GeometryEditor(b,a);b.data("editor",c)})},b.ge=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ge/GeometryEditor":5,"./ge/defaultParams":8}]},{},[16]);